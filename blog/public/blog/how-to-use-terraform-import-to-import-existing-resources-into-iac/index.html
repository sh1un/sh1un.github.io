<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, shrink-to-fit=no"
/>
<meta name="robots" content="index, follow" />
<title>
  要導入 IaC？用 Terraform Import 導入現有資源 | Shiun
</title>
<meta
  name="keywords"
  content="Terraform, Terraform Import, Infrastructure as Code, IaC, AWS, AWS EC2, DevOps, Cloud Management, Cloud Infrastructure, Terraform Tutorial, AWS Tutorial, Import AWS Resources, Terraform State, Cloud Automation, AWS Console, Infrastructure Management"
/> <meta name="description" content="過去我們可能習慣直接在 AWS Console 上建立資源，但是現在想導入 IaC，把原本建立好的資源改成用 Terraform 管理。這篇文章會教你如何使用 Terraform Import 功能，將現有的資源導入到 Terraform 的 State 中"> <meta name="author" content=""> <link rel="canonical" href="https://shiun.me/blog/how-to-use-terraform-import-to-import-existing-resources-into-iac/">
<link
  crossorigin="anonymous"
  href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css"
  integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A="
  rel="preload stylesheet"
  as="style"
/> <link rel="icon" href="https://github.com/sh1un/sh1un.github.io/assets/85695943/12a1e84f-ed17-4e38-8165-f67783c7f047"> <link
rel="icon" type="image/png" sizes="16x16" href="https://shiun.me/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://shiun.me/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://shiun.me/apple-touch-icon.png"> <link rel="mask-icon" href="https://shiun.me/safari-pinned-tab.svg"> <meta name="theme-color" content="#2e2e33"> <meta name="msapplication-TileColor" content="#2e2e33"> <link rel="alternate" hreflang="en" href="https://shiun.me/blog/how-to-use-terraform-import-to-import-existing-resources-into-iac/" />


      <script async src="https://www.googletagmanager.com/gtag/js?id=G-RZR8D4ERKG"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-RZR8D4ERKG');
        }
      </script>


<meta property="og:url" content="https://shiun.me/blog/how-to-use-terraform-import-to-import-existing-resources-into-iac/">
  <meta property="og:site_name" content="Shiun">
  <meta property="og:title" content="要導入 IaC？用 Terraform Import 導入現有資源">
  <meta property="og:description" content="過去我們可能習慣直接在 AWS Console 上建立資源，但是現在想導入 IaC，把原本建立好的資源改成用 Terraform 管理。這篇文章會教你如何使用 Terraform Import 功能，將現有的資源導入到 Terraform 的 State 中">
  <meta property="og:locale" content="zh_tw">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2024-06-06T10:50:53+08:00">
    <meta property="article:modified_time" content="2024-06-06T10:50:53+08:00">
    <meta property="article:tag" content="Terraform">
    <meta property="article:tag" content="IaC">
    <meta property="article:tag" content="AWS">
    <meta property="article:tag" content="Version Control">
    <meta property="article:tag" content="Terraform Import">
    <meta property="article:tag" content="DevOps">
    <meta property="og:image" content="https://github.com/sh1un/sh1un.github.io/assets/85695943/42e903b9-06db-4cd8-b937-590a3cb26aea">




  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://github.com/sh1un/sh1un.github.io/assets/85695943/42e903b9-06db-4cd8-b937-590a3cb26aea">
  <meta name="twitter:title" content="要導入 IaC？用 Terraform Import 導入現有資源">
  <meta name="twitter:description" content="過去我們可能習慣直接在 AWS Console 上建立資源，但是現在想導入 IaC，把原本建立好的資源改成用 Terraform 管理。這篇文章會教你如何使用 Terraform Import 功能，將現有的資源導入到 Terraform 的 State 中">


<noscript>
  <style>
    #theme-toggle,
    .top-link {
      display: none;
    }
  </style>
  <style>
    @media (prefers-color-scheme: dark) {
      :root {
        --theme: rgb(29, 30, 32);
        --entry: rgb(46, 46, 51);
        --primary: rgb(218, 218, 219);
        --secondary: rgb(155, 156, 157);
        --tertiary: rgb(65, 66, 68);
        --content: rgb(196, 196, 197);
        --code-block-bg: rgb(46, 46, 51);
        --code-bg: rgb(55, 56, 62);
        --border: rgb(51, 51, 51);
      }

      .list {
        background: var(--theme);
      }

      .list:not(.dark)::-webkit-scrollbar-track {
        background: 0 0;
      }

      .list:not(.dark)::-webkit-scrollbar-thumb {
        border-color: var(--theme);
      }
    }
  </style>
</noscript>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-RZR8D4ERKG"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-RZR8D4ERKG');
        }
      </script><meta property="og:title" content="要導入 IaC？用 Terraform Import 導入現有資源" />
<meta property="og:description" content="過去我們可能習慣直接在 AWS Console 上建立資源，但是現在想導入 IaC，把原本建立好的資源改成用 Terraform 管理。這篇文章會教你如何使用 Terraform Import 功能，將現有的資源導入到 Terraform 的 State 中" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://shiun.me/blog/how-to-use-terraform-import-to-import-existing-resources-into-iac/" /><meta property="og:image" content="https://github.com/sh1un/sh1un.github.io/assets/85695943/42e903b9-06db-4cd8-b937-590a3cb26aea"/><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2024-06-06T10:50:53+08:00" />
<meta property="article:modified_time" content="2024-06-06T10:50:53+08:00" /><meta property="og:site_name" content="Shiun&#39;s Blog" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://github.com/sh1un/sh1un.github.io/assets/85695943/42e903b9-06db-4cd8-b937-590a3cb26aea"/>

<meta name="twitter:title" content="要導入 IaC？用 Terraform Import 導入現有資源"/>
<meta name="twitter:description" content="過去我們可能習慣直接在 AWS Console 上建立資源，但是現在想導入 IaC，把原本建立好的資源改成用 Terraform 管理。這篇文章會教你如何使用 Terraform Import 功能，將現有的資源導入到 Terraform 的 State 中"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Blogs",
      "item": "https://shiun.me/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "要導入 IaC？用 Terraform Import 導入現有資源",
      "item": "https://shiun.me/blog/how-to-use-terraform-import-to-import-existing-resources-into-iac/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "要導入 IaC？用 Terraform Import 導入現有資源",
  "name": "要導入 IaC？用 Terraform Import 導入現有資源",
  "description": "過去我們可能習慣直接在 AWS Console 上建立資源，但是現在想導入 IaC，把原本建立好的資源改成用 Terraform 管理。這篇文章會教你如何使用 Terraform Import 功能，將現有的資源導入到 Terraform 的 State 中",
  "keywords": [
    "Terraform", "Terraform Import", "Infrastructure as Code", "IaC", "AWS", "AWS EC2", "DevOps", "Cloud Management", "Cloud Infrastructure", "Terraform Tutorial", "AWS Tutorial", "Import AWS Resources", "Terraform State", "Cloud Automation", "AWS Console", "Infrastructure Management"
  ],
  "articleBody": " Terraform Import 簡介 Terraform Import 是 Terraform 中的一個功能，允許你將現有的基礎設施資源導入到 Terraform 的狀態文件中。這樣，你可以將已有的基礎設施與 Terraform 的配置文件同步，並開始使用 Terraform 來管理這些資源\n什麼時候需要用到 terraform import？ terraform import 並不是一個自動偵測 AWS 資源上的東西，然後自動幫忙寫程式碼的工具 如果你以前沒有使用任何 IaC 的工具，都是直接在 AWS Console 上管理和創建資源，但現在想要導入 IaC，然後把那些「現有資源」導入到 Terraform 來管理，那你就會需要用到 terraform import\nterraform import 的主要目的是將已經存在的基礎設施資源導入到 Terraform 的狀態文件中，這樣你就可以用 Terraform 來管理這些資源。例如，如果你有一個已經存在的 AWS EC2 實例，而你現在想開始用 Terraform 來管理它，你需要導入這個實例以便 Terraform 知道它的存在和當前狀態\nSynopsis $ terraform import [options] ADDRESS ID ADDRESS 是 Terraform 配置中資源的地址。例如，aws_instance.my_instance ID 是資源的唯一標識符，這個值根據不同的資源類型會有所不同。例如，對於 AWS EC2 實例，這個 ID 是實例的 ID（例如 i-1234567890abcdef0） Example $ terraform import aws_instance.my_instance i-1234567890abcdef0 data.aws_region.current: Reading... data.aws_availability_zones.available: Reading... data.aws_ami.ubuntu: Reading... aws_instance.aws_linux: Import prepared! Prepared aws_instance for import aws_instance.aws_linux: Refreshing state... [id=i-00066e5627229c90e] data.aws_region.current: Read complete after 0s [id=us-east-1] data.aws_availability_zones.available: Read complete after 1s [id=us-east-1] data.aws_ami.ubuntu: Read complete after 1s [id=ami-0f81732f07ce19b1c] Import successful! The resources that were imported are shown above. These resources are now in your Terraform state and will henceforth be managed by Terraform. Hands-on 到 AWS Console 創建資源\n我這邊創建了一台 EC2 Instance\n接著在 main.tf 加入以下程式碼:\nresource \"aws_instance\" \"aws_linux\" { } 打開 Terminal 使用 terraform import 來 import 現有的資源\n$ terraform import aws_instance.aws_linux i-00066e5627229c90e data.aws_region.current: Reading... data.aws_availability_zones.available: Reading... data.aws_ami.ubuntu: Reading... aws_instance.aws_linux: Import prepared! Prepared aws_instance for import aws_instance.aws_linux: Refreshing state... [id=i-00066e5627229c90e] data.aws_region.current: Read complete after 0s [id=us-east-1] data.aws_availability_zones.available: Read complete after 1s [id=us-east-1] data.aws_ami.ubuntu: Read complete after 1s [id=ami-0f81732f07ce19b1c] Import successful! The resources that were imported are shown above. These resources are now in your Terraform state and will henceforth be managed by Terraform. 用 terraform state list 查看一下現在的 state，會看到我們的 aws_instance.aws_linux\n輸入看看 terraform plan :\n$ terrafomr plan ╷ │ Error: Missing required argument │ │ with aws_instance.aws_linux, │ on main.tf line 263, in resource \"aws_instance\" \"aws_linux\": │ 263: resource \"aws_instance\" \"aws_linux\" { │ │ \"launch_template\": one of `ami,instance_type,launch_template` must be specified ╵ ╷ │ Error: Missing required argument │ │ with aws_instance.aws_linux, │ on main.tf line 263, in resource \"aws_instance\" \"aws_linux\": │ 263: resource \"aws_instance\" \"aws_linux\" { │ │ \"ami\": one of `ami,launch_template` must be specified ╵ ╷ │ Error: Missing required argument │ │ with aws_instance.aws_linux, │ on main.tf line 263, in resource \"aws_instance\" \"aws_linux\": │ 263: resource \"aws_instance\" \"aws_linux\" { │ │ \"instance_type\": one of `instance_type,launch_template` must be specified 出現 ERROR 很正常，畢竟就是看著我們的程式碼去執行該指令，而我們的 resource \"aws_instance\" \"aws_linux\" {} 裡面都沒配置任何參數當然會出錯，要解決可以用 terraform state show 來處理，把這個資源的詳細資訊配置到我們程式碼，因為我們已經知道他被寫入 state\n使用 terraform state show 來查看資源的詳細資訊:\n$ terraform state show aws_instance.aws_linux # aws_instance.aws_linux: resource \"aws_instance\" \"aws_linux\" { ami = \"ami-00beae93a2d981137\" arn = \"arn:aws:ec2:us-east-1:058264428816:instance/i-00066e5627229c90e\" associate_public_ip_address = true availability_zone = \"us-east-1b\" cpu_core_count = 1 cpu_threads_per_core = 1 disable_api_stop = false disable_api_termination = false ebs_optimized = false get_password_data = false hibernation = false host_id = null # 略... 然後根據上面面 terraform state show 輸出的結果把程式碼改成如下:\n# main.tf resource \"aws_instance\" \"aws_linux\" { instance_type = \"t2.micro\" ami = \"ami-00beae93a2d981137\" } 接著再輸入 terraform plan 就不會報錯了，此時我們原先在 AWS Console 上手動建立了資源就被 Terraform 所管\n如果我們要刪掉那個資源也可以透過 terraform 來刪除，我們把原先那行註解掉:\n# main.tf # resource \"aws_instance\" \"aws_linux\" { # instance_type = \"t2.micro\" # ami = \"ami-00beae93a2d981137\" # } 接著我們再來執行 terraform plan :\n$ terraform plan # 略... # aws_instance.aws_linux will be destroyed # (because aws_instance.aws_linux is not in configuration) - resource \"aws_instance\" \"aws_linux\" { - ami = \"ami-00beae93a2d981137\" -\u003e null - arn = \"arn:aws:ec2:us-east-1:058264428816:instance/i-00066e5627229c90e\" -\u003e null - associate_public_ip_address = true -\u003e null - availability_zone = \"us-east-1b\" -\u003e null - cpu_core_count = 1 -\u003e null 補充 - 直接寫在程式碼內，import block 在 Terraform v1.5.0 之後，引入了新的 import block，import block 可以直接在 Terraform 配置文件中指定哪些資源需要被導入，而不需要單獨執行 terraform import 命令\n這個新功能的好處在於，當你和你的團隊需要多次或系統地導入資源時，可以將這些導入操作版本化並包含在基礎設施即程式碼 (IaC) 配置中\n一個 import block 的基本語法如下:\nimport { to = aws_instance.example id = \"i-12345678\" } to 指定了要導入到的 Terraform 資源塊 id 是現有資源的 ID 所以剛才我們用 CLI 所示範的內容，你可以改成用以下方式來撰寫\nresource \"aws_instance\" \"aws_linux\" { # 你的資源配置 } import { to = aws_instance.example id = \"i-00066e5627229c90e\" } Resources Import | Terraform | HashiCorp Developer Shiun’s Learning Journal - 20240605 ",
  "wordCount" : "581",
  "inLanguage": "en",
  "datePublished": "2024-06-06T10:50:53+08:00",
  "dateModified": "2024-06-06T10:50:53+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://shiun.me/blog/how-to-use-terraform-import-to-import-existing-resources-into-iac/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Shiun",
    "logo": {
      "@type": "ImageObject",
      "url": "https://github.com/sh1un/sh1un.github.io/assets/85695943/12a1e84f-ed17-4e38-8165-f67783c7f047"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://shiun.me/" accesskey="h" title="Shiun (Alt + H)">Shiun</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://shiun.me/blog/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://shiun.me/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://shiun.me/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://shiun.me/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://shiun.notion.site/Shiun-s-Learning-Journal-ded4cd4a3efd47b2805f2f99dee8f9a1?pvs=4" title="Notion">
                    <span>Notion</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://www.linkedin.com/in/shiunchiu" title="About me">
                    <span>About me</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://shiun.me/">Home</a>&nbsp;»&nbsp;<a href="https://shiun.me/blog/">Blogs</a></div>
    <h1 class="post-title entry-hint-parent">
      要導入 IaC？用 Terraform Import 導入現有資源
    </h1>
    <div class="post-description">
      過去我們可能習慣直接在 AWS Console 上建立資源，但是現在想導入 IaC，把原本建立好的資源改成用 Terraform 管理。這篇文章會教你如何使用 Terraform Import 功能，將現有的資源導入到 Terraform 的 State 中
    </div>
    <div class="post-meta"><span title='2024-06-06 10:50:53 +0800 CST'>June 6, 2024</span>&nbsp;·&nbsp;3 min

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#terraform-import" aria-label="Terraform Import">Terraform Import</a><ul>
                        
                <li>
                    <a href="#%e7%b0%a1%e4%bb%8b" aria-label="簡介">簡介</a></li>
                <li>
                    <a href="#%e4%bb%80%e9%ba%bc%e6%99%82%e5%80%99%e9%9c%80%e8%a6%81%e7%94%a8%e5%88%b0-terraform-import" aria-label="什麼時候需要用到 terraform import？">什麼時候需要用到 terraform import？</a></li>
                <li>
                    <a href="#synopsis" aria-label="Synopsis">Synopsis</a></li>
                <li>
                    <a href="#example" aria-label="Example">Example</a></li>
                <li>
                    <a href="#hands-on" aria-label="Hands-on">Hands-on</a></li>
                <li>
                    <a href="#%e8%a3%9c%e5%85%85---%e7%9b%b4%e6%8e%a5%e5%af%ab%e5%9c%a8%e7%a8%8b%e5%bc%8f%e7%a2%bc%e5%85%a7import-block" aria-label="補充 - 直接寫在程式碼內，import block">補充 - 直接寫在程式碼內，import block</a></li>
                <li>
                    <a href="#resources" aria-label="Resources">Resources</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p><img loading="lazy" src="https://github.com/sh1un/sh1un.github.io/assets/85695943/e2027f5e-d58b-4c4b-983a-ad9a8b76ce63" alt="Blog  Cover - Terraform Import (WhiteBG)"  />
</p>
<h2 id="terraform-import">Terraform Import<a hidden class="anchor" aria-hidden="true" href="#terraform-import">#</a></h2>
<h3 id="簡介">簡介<a hidden class="anchor" aria-hidden="true" href="#簡介">#</a></h3>
<p>Terraform Import 是 Terraform 中的一個功能，允許你將現有的基礎設施資源導入到 Terraform 的狀態文件中。這樣，你可以將已有的基礎設施與 Terraform 的配置文件同步，並開始使用 Terraform 來管理這些資源</p>
<h3 id="什麼時候需要用到-terraform-import">什麼時候需要用到 <code>terraform import</code>？<a hidden class="anchor" aria-hidden="true" href="#什麼時候需要用到-terraform-import">#</a></h3>
<blockquote>
<p>terraform import 並不是一個自動偵測 AWS 資源上的東西，然後自動幫忙寫程式碼的工具
如果你以前沒有使用任何 IaC 的工具，都是直接在 AWS Console 上管理和創建資源，但現在想要導入 IaC，然後把那些「現有資源」導入到 Terraform 來管理，那你就會需要用到 <code>terraform import</code></p>
</blockquote>
<p><code>terraform import</code> 的主要目的是將已經存在的基礎設施資源導入到 Terraform 的狀態文件中，這樣你就可以用 Terraform 來管理這些資源。例如，如果你有一個已經存在的 AWS EC2 實例，而你現在想開始用 Terraform 來管理它，你需要導入這個實例以便 Terraform 知道它的存在和當前狀態</p>
<h3 id="synopsis">Synopsis<a hidden class="anchor" aria-hidden="true" href="#synopsis">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ terraform import <span style="color:#f92672">[</span>options<span style="color:#f92672">]</span> ADDRESS ID
</span></span></code></pre></div><ul>
<li><code>ADDRESS</code> 是 Terraform 配置中資源的地址。例如，<code>aws_instance.my_instance</code></li>
<li><code>ID</code> 是資源的唯一標識符，這個值根據不同的資源類型會有所不同。例如，對於 AWS EC2 實例，這個 ID 是實例的 ID（例如 <code>i-1234567890abcdef0</code>）</li>
</ul>
<h3 id="example">Example<a hidden class="anchor" aria-hidden="true" href="#example">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ terraform import aws_instance.my_instance i-1234567890abcdef0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data.aws_region.current: Reading...
</span></span><span style="display:flex;"><span>data.aws_availability_zones.available: Reading...
</span></span><span style="display:flex;"><span>data.aws_ami.ubuntu: Reading...
</span></span><span style="display:flex;"><span>aws_instance.aws_linux: Import prepared!
</span></span><span style="display:flex;"><span>  Prepared aws_instance <span style="color:#66d9ef">for</span> import
</span></span><span style="display:flex;"><span>aws_instance.aws_linux: Refreshing state... <span style="color:#f92672">[</span>id<span style="color:#f92672">=</span>i-00066e5627229c90e<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>data.aws_region.current: Read complete after 0s <span style="color:#f92672">[</span>id<span style="color:#f92672">=</span>us-east-1<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>data.aws_availability_zones.available: Read complete after 1s <span style="color:#f92672">[</span>id<span style="color:#f92672">=</span>us-east-1<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>data.aws_ami.ubuntu: Read complete after 1s <span style="color:#f92672">[</span>id<span style="color:#f92672">=</span>ami-0f81732f07ce19b1c<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Import successful!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The resources that were imported are shown above. These resources are now in
</span></span><span style="display:flex;"><span>your Terraform state and will henceforth be managed by Terraform.
</span></span></code></pre></div><h3 id="hands-on">Hands-on<a hidden class="anchor" aria-hidden="true" href="#hands-on">#</a></h3>
<p>到 AWS Console 創建資源</p>
<p>我這邊創建了一台 EC2 Instance</p>
<p><img loading="lazy" src="https://github.com/sh1un/sh1un.github.io/assets/85695943/fc903bf3-d29f-4db5-ade8-8ebac02c1ca6" alt="01-created_instance"  />
</p>
<p>接著在 <a href="http://main.tf">main.tf</a> 加入以下程式碼:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>resource <span style="color:#e6db74">&#34;aws_instance&#34;</span> <span style="color:#e6db74">&#34;aws_linux&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>打開 Terminal 使用 <code>terraform import</code> 來 import 現有的資源</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ terraform import aws_instance.aws_linux i-00066e5627229c90e
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data.aws_region.current: Reading...
</span></span><span style="display:flex;"><span>data.aws_availability_zones.available: Reading...
</span></span><span style="display:flex;"><span>data.aws_ami.ubuntu: Reading...
</span></span><span style="display:flex;"><span>aws_instance.aws_linux: Import prepared!
</span></span><span style="display:flex;"><span>  Prepared aws_instance <span style="color:#66d9ef">for</span> import
</span></span><span style="display:flex;"><span>aws_instance.aws_linux: Refreshing state... <span style="color:#f92672">[</span>id<span style="color:#f92672">=</span>i-00066e5627229c90e<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>data.aws_region.current: Read complete after 0s <span style="color:#f92672">[</span>id<span style="color:#f92672">=</span>us-east-1<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>data.aws_availability_zones.available: Read complete after 1s <span style="color:#f92672">[</span>id<span style="color:#f92672">=</span>us-east-1<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>data.aws_ami.ubuntu: Read complete after 1s <span style="color:#f92672">[</span>id<span style="color:#f92672">=</span>ami-0f81732f07ce19b1c<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Import successful!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The resources that were imported are shown above. These resources are now in
</span></span><span style="display:flex;"><span>your Terraform state and will henceforth be managed by Terraform.
</span></span></code></pre></div><p>用 <code>terraform state list</code> 查看一下現在的 state，會看到我們的 <code>aws_instance.aws_linux</code></p>
<p><img loading="lazy" src="https://github.com/sh1un/sh1un.github.io/assets/85695943/3dbafed0-c5ac-4230-9015-c8cfe7bb7d17" alt="02-terraform_state_list_output"  />
</p>
<p>輸入看看 <code>terraform plan</code> :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ terrafomr plan
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>╷
</span></span><span style="display:flex;"><span>│ Error: Missing required argument
</span></span><span style="display:flex;"><span>│
</span></span><span style="display:flex;"><span>│   with aws_instance.aws_linux,
</span></span><span style="display:flex;"><span>│   on main.tf line 263, in resource <span style="color:#e6db74">&#34;aws_instance&#34;</span> <span style="color:#e6db74">&#34;aws_linux&#34;</span>:
</span></span><span style="display:flex;"><span>│  263: resource <span style="color:#e6db74">&#34;aws_instance&#34;</span> <span style="color:#e6db74">&#34;aws_linux&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>│
</span></span><span style="display:flex;"><span>│ <span style="color:#e6db74">&#34;launch_template&#34;</span>: one of <span style="color:#e6db74">`</span>ami,instance_type,launch_template<span style="color:#e6db74">`</span> must be specified
</span></span><span style="display:flex;"><span>╵
</span></span><span style="display:flex;"><span>╷
</span></span><span style="display:flex;"><span>│ Error: Missing required argument
</span></span><span style="display:flex;"><span>│
</span></span><span style="display:flex;"><span>│   with aws_instance.aws_linux,
</span></span><span style="display:flex;"><span>│   on main.tf line 263, in resource <span style="color:#e6db74">&#34;aws_instance&#34;</span> <span style="color:#e6db74">&#34;aws_linux&#34;</span>:
</span></span><span style="display:flex;"><span>│  263: resource <span style="color:#e6db74">&#34;aws_instance&#34;</span> <span style="color:#e6db74">&#34;aws_linux&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>│
</span></span><span style="display:flex;"><span>│ <span style="color:#e6db74">&#34;ami&#34;</span>: one of <span style="color:#e6db74">`</span>ami,launch_template<span style="color:#e6db74">`</span> must be specified
</span></span><span style="display:flex;"><span>╵
</span></span><span style="display:flex;"><span>╷
</span></span><span style="display:flex;"><span>│ Error: Missing required argument
</span></span><span style="display:flex;"><span>│
</span></span><span style="display:flex;"><span>│   with aws_instance.aws_linux,
</span></span><span style="display:flex;"><span>│   on main.tf line 263, in resource <span style="color:#e6db74">&#34;aws_instance&#34;</span> <span style="color:#e6db74">&#34;aws_linux&#34;</span>:
</span></span><span style="display:flex;"><span>│  263: resource <span style="color:#e6db74">&#34;aws_instance&#34;</span> <span style="color:#e6db74">&#34;aws_linux&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>│
</span></span><span style="display:flex;"><span>│ <span style="color:#e6db74">&#34;instance_type&#34;</span>: one of <span style="color:#e6db74">`</span>instance_type,launch_template<span style="color:#e6db74">`</span> must be specified
</span></span></code></pre></div><p>出現 ERROR 很正常，畢竟就是看著我們的程式碼去執行該指令，而我們的 <code>resource &quot;aws_instance&quot; &quot;aws_linux&quot; {}</code> 裡面都沒配置任何參數當然會出錯，要解決可以用 <code>terraform state show</code> 來處理，把這個資源的詳細資訊配置到我們程式碼，因為我們已經知道他被寫入 state</p>
<p>使用 <code>terraform state show</code> 來查看資源的詳細資訊:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ terraform state show aws_instance.aws_linux
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># aws_instance.aws_linux:</span>
</span></span><span style="display:flex;"><span>resource <span style="color:#e6db74">&#34;aws_instance&#34;</span> <span style="color:#e6db74">&#34;aws_linux&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    ami                                  <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ami-00beae93a2d981137&#34;</span>
</span></span><span style="display:flex;"><span>    arn                                  <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;arn:aws:ec2:us-east-1:058264428816:instance/i-00066e5627229c90e&#34;</span>
</span></span><span style="display:flex;"><span>    associate_public_ip_address          <span style="color:#f92672">=</span> true
</span></span><span style="display:flex;"><span>    availability_zone                    <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;us-east-1b&#34;</span>
</span></span><span style="display:flex;"><span>    cpu_core_count                       <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    cpu_threads_per_core                 <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    disable_api_stop                     <span style="color:#f92672">=</span> false
</span></span><span style="display:flex;"><span>    disable_api_termination              <span style="color:#f92672">=</span> false
</span></span><span style="display:flex;"><span>    ebs_optimized                        <span style="color:#f92672">=</span> false
</span></span><span style="display:flex;"><span>    get_password_data                    <span style="color:#f92672">=</span> false
</span></span><span style="display:flex;"><span>    hibernation                          <span style="color:#f92672">=</span> false
</span></span><span style="display:flex;"><span>    host_id                              <span style="color:#f92672">=</span> null
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 略...</span>
</span></span></code></pre></div><p>然後根據上面面 <code>terraform state show</code> 輸出的結果把程式碼改成如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># main.tf</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>resource <span style="color:#e6db74">&#34;aws_instance&#34;</span> <span style="color:#e6db74">&#34;aws_linux&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  instance_type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;t2.micro&#34;</span>
</span></span><span style="display:flex;"><span>  ami           <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ami-00beae93a2d981137&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>接著再輸入 <code>terraform plan</code> 就不會報錯了，此時我們原先在 AWS Console 上手動建立了資源就被 Terraform 所管</p>
<p>如果我們要刪掉那個資源也可以透過 terraform 來刪除，我們把原先那行註解掉:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># main.tf</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># resource &#34;aws_instance&#34; &#34;aws_linux&#34; {</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   instance_type = &#34;t2.micro&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   ami           = &#34;ami-00beae93a2d981137&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># }</span>
</span></span></code></pre></div><p>接著我們再來執行 <code>terraform plan</code> :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ terraform plan
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 略...</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># aws_instance.aws_linux will be destroyed</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># (because aws_instance.aws_linux is not in configuration)</span>
</span></span><span style="display:flex;"><span>  - resource <span style="color:#e6db74">&#34;aws_instance&#34;</span> <span style="color:#e6db74">&#34;aws_linux&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      - ami                                  <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ami-00beae93a2d981137&#34;</span> -&gt; null
</span></span><span style="display:flex;"><span>      - arn                                  <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;arn:aws:ec2:us-east-1:058264428816:instance/i-00066e5627229c90e&#34;</span> -&gt; null
</span></span><span style="display:flex;"><span>      - associate_public_ip_address          <span style="color:#f92672">=</span> true -&gt; null
</span></span><span style="display:flex;"><span>      - availability_zone                    <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;us-east-1b&#34;</span> -&gt; null
</span></span><span style="display:flex;"><span>      - cpu_core_count                       <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> -&gt; null
</span></span></code></pre></div><h3 id="補充---直接寫在程式碼內import-block">補充 - 直接寫在程式碼內，import block<a hidden class="anchor" aria-hidden="true" href="#補充---直接寫在程式碼內import-block">#</a></h3>
<p>在 Terraform v1.5.0 之後，引入了新的 <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a>，<code>import</code> block 可以直接在 Terraform 配置文件中指定哪些資源需要被導入，而不需要單獨執行 <code>terraform import</code> 命令</p>
<p>這個新功能的好處在於，當你和你的團隊需要多次或系統地導入資源時，可以將這些導入操作版本化並包含在基礎設施即程式碼 (IaC) 配置中</p>
<p>一個 <code>import</code> block 的基本語法如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>import <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  to <span style="color:#f92672">=</span> aws_instance.example
</span></span><span style="display:flex;"><span>  id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;i-12345678&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><ul>
<li><code>to</code> 指定了要導入到的 Terraform 資源塊</li>
<li><code>id</code> 是現有資源的 ID</li>
</ul>
<p>所以剛才我們用 CLI 所示範的內容，你可以改成用以下方式來撰寫</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>resource <span style="color:#e6db74">&#34;aws_instance&#34;</span> <span style="color:#e6db74">&#34;aws_linux&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># 你的資源配置</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>import <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  to <span style="color:#f92672">=</span> aws_instance.example
</span></span><span style="display:flex;"><span>  id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;i-00066e5627229c90e&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="resources">Resources<a hidden class="anchor" aria-hidden="true" href="#resources">#</a></h3>
<ul>
<li><a href="https://developer.hashicorp.com/terraform/cli/import">Import | Terraform | HashiCorp Developer</a></li>
<li><a href="https://www.notion.so/20240605-a29a522dba9d4e8eb7a60fe899595908?pvs=21">Shiun&rsquo;s Learning Journal - 20240605</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://shiun.me/tags/terraform/">Terraform</a></li>
      <li><a href="https://shiun.me/tags/iac/">IaC</a></li>
      <li><a href="https://shiun.me/tags/aws/">AWS</a></li>
      <li><a href="https://shiun.me/tags/version-control/">Version Control</a></li>
      <li><a href="https://shiun.me/tags/terraform-import/">Terraform Import</a></li>
      <li><a href="https://shiun.me/tags/devops/">DevOps</a></li>
      <li><a href="https://shiun.me/tags/cloud-infrastructure/">Cloud Infrastructure</a></li>
      <li><a href="https://shiun.me/tags/technical-tutorial/">Technical Tutorial</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://shiun.me/blog/understanding-lambda-proxy-integration/">
    <span class="title">« Prev</span>
    <br>
    <span>深度解析 AWS API Gateway 的 Lambda Proxy Integration 功能</span>
  </a>
  <a class="next" href="https://shiun.me/blog/2024-aws-genai-hackathon/">
    <span class="title">Next »</span>
    <br>
    <span>學生時期的最後一場比賽: 2024 GenAI Hackathon 比賽紀錄</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 要導入 IaC？用 Terraform Import 導入現有資源 on x"
            href="https://x.com/intent/tweet/?text=%e8%a6%81%e5%b0%8e%e5%85%a5%20IaC%ef%bc%9f%e7%94%a8%20Terraform%20Import%20%e5%b0%8e%e5%85%a5%e7%8f%be%e6%9c%89%e8%b3%87%e6%ba%90&amp;url=https%3a%2f%2fshiun.me%2fblog%2fhow-to-use-terraform-import-to-import-existing-resources-into-iac%2f&amp;hashtags=Terraform%2cIaC%2cAWS%2cVersionControl%2cTerraformImport%2cDevOps%2cCloudInfrastructure%2cTechnicalTutorial">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 要導入 IaC？用 Terraform Import 導入現有資源 on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fshiun.me%2fblog%2fhow-to-use-terraform-import-to-import-existing-resources-into-iac%2f&amp;title=%e8%a6%81%e5%b0%8e%e5%85%a5%20IaC%ef%bc%9f%e7%94%a8%20Terraform%20Import%20%e5%b0%8e%e5%85%a5%e7%8f%be%e6%9c%89%e8%b3%87%e6%ba%90&amp;summary=%e8%a6%81%e5%b0%8e%e5%85%a5%20IaC%ef%bc%9f%e7%94%a8%20Terraform%20Import%20%e5%b0%8e%e5%85%a5%e7%8f%be%e6%9c%89%e8%b3%87%e6%ba%90&amp;source=https%3a%2f%2fshiun.me%2fblog%2fhow-to-use-terraform-import-to-import-existing-resources-into-iac%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 要導入 IaC？用 Terraform Import 導入現有資源 on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fshiun.me%2fblog%2fhow-to-use-terraform-import-to-import-existing-resources-into-iac%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 要導入 IaC？用 Terraform Import 導入現有資源 on telegram"
            href="https://telegram.me/share/url?text=%e8%a6%81%e5%b0%8e%e5%85%a5%20IaC%ef%bc%9f%e7%94%a8%20Terraform%20Import%20%e5%b0%8e%e5%85%a5%e7%8f%be%e6%9c%89%e8%b3%87%e6%ba%90&amp;url=https%3a%2f%2fshiun.me%2fblog%2fhow-to-use-terraform-import-to-import-existing-resources-into-iac%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
</ul>

  </footer><div class="disqus markdown"><div id="disqus_thread"></div>
<script>
  

  

  (function () {
    
    var d = document,
      s = d.createElement("script");
    s.src = "https://shiun-me.disqus.com/embed.js";
    s.setAttribute("data-timestamp", +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript
  >Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript"
    >comments powered by Disqus.</a
  ></noscript
>
</div>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://shiun.me/">Shiun</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
